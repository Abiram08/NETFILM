<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movies - NetFlim</title>
  <link rel="stylesheet" href="css/Homepage.css">
  <link rel="stylesheet" href="css/Movies.css">
</head>
<body>
  <header>
    <div class="logo">NETFLIM</div>
    <nav>
      <a href="Homepage.html">Home</a>
      <a href="pages/Movies.html">Movies</a>
      <a href="pages/Tvshows.html">TV Shows</a>
      <a href="pages/Anime.html">Anime</a>
      <a href="pages/Login.html">Login</a>
      <a href="pages/signup.html" class="signup-btn">Sign Up</a>
    </nav>
  </header>

  <main>
    <section class="movies-section">
      <h1>Our Movies</h1>
      <div class="movie-grid">
        <div class="movie-card">
          <img src="images/Batman.jpg" alt="The Batman">
          <h3>The Batman</h3>
          <p>2022 • Action</p>
        </div>
        <div class="movie-card">
          <img src="images/Dune.jpg" alt="Dune">
          <h3>Dune</h3>
          <p>2021 • Sci-Fi</p>
        </div>
        <div class="movie-card">
          <img src="images/Interstelllar.jpg" alt="Interstellar">
          <h3>Interstellar</h3>
          <p>2014 • Sci-Fi</p>
        </div>
        <div class="movie-card">
          <img src="images/The God Father.jpg" alt="The Godfather">
          <h3>The Godfather</h3>
          <p>1972 • Crime</p>
        </div>
        <div class="movie-card">
          <img src="images/Fight Club.jpg" alt="Fight Club">
          <h3>Fight Club</h3>
          <p>1999 • Drama</p>
        </div>
        <div class="movie-card">
          <img src="images/John Wick.jpg" alt="John Wick">
          <h3>John Wick</h3>
          <p>2014 • Action</p>
        </div>
        <div class="movie-card">
          <img src="images/Joker.jpeg" alt="Joker">
          <h3>Joker</h3>
          <p>2019 • Drama</p>
        </div>
        <div class="movie-card">
          <img src="images/Oppenheimer.jpg" alt="Oppenheimer">
          <h3>Oppenheimer</h3>
          <p>2023 • Drama</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 NetFlim. All Rights Reserved.</p>
  </footer>

  <script src="js/main.js"></script>
  
  <!-- Back to top button -->
  <a href="#top" class="back-to-top" aria-label="Back to top">
    <i class="fas fa-arrow-up" aria-hidden="true"></i>
  </a>

  <!-- Bootstrap JS Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Custom JS -->
  <script src="js/main.js"></script>
  
  <script>
    // Add smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          window.scrollTo({
            top: target.offsetTop - 80, // Account for fixed header
            behavior: 'smooth'
          });
        }
      });
    });
  </script>
  
  <script>
    // Show skeleton loading state
    document.addEventListener('DOMContentLoaded', function() {
      const container = document.getElementById('movies-container');
      const skeletonLoader = container.querySelector('.skeleton-loader');
      const searchInput = document.getElementById('movie-search');
      const filterButtons = document.querySelectorAll('.filter-options .btn');
      const sortSelect = document.getElementById('sort-movies');
      
      // Generate skeleton cards
      const skeletonCards = Array(12).fill(`
        <div class="skeleton-card">
          <div class="skeleton-poster"></div>
          <div class="skeleton-details">
            <div class="skeleton-title"></div>
            <div class="skeleton-meta"></div>
          </div>
        </div>
      `).join('');
      
      skeletonLoader.innerHTML = skeletonCards;
      
      // Simulate loading delay (replace with actual data loading)
      setTimeout(() => {
        // Remove skeleton loader
        skeletonLoader.remove();
        
        // Create movie cards
        const movies = [
          {
            id: 1,
            title: 'Oppenheimer',
            image: 'images/Oppenheimer.jpg',
            year: '2023',
            rating: '8.5',
            categories: 'drama, thriller',
            synopsis: 'The story of American scientist J. Robert Oppenheimer and his role in the development of the atomic bomb.'
          },
          {
            id: 2,
            title: 'The Batman',
            image: 'images/Batman.jpg',
            year: '2022',
            rating: '7.9',
            categories: 'action, crime, drama',
            synopsis: 'When a sadistic serial killer begins murdering key political figures in Gotham, Batman is forced to investigate.'
          },
          {
            id: 3,
            title: 'Dune',
            image: 'images/Dune.jpg',
            year: '2021',
            rating: '8.0',
            categories: 'sci-fi, adventure',
            synopsis: 'Feature adaptation of Frank Herbert\'s science fiction novel about the son of a noble family entrusted with the protection of the most valuable asset in the galaxy.'
          },
          {
            id: 4,
            title: 'Joker',
            image: 'images/Joker.jpeg',
            year: '2019',
            rating: '8.4',
            categories: 'crime, drama, thriller',
            synopsis: 'In Gotham City, mentally troubled comedian Arthur Fleck is disregarded and mistreated by society.'
          },
          {
            id: 5,
            title: 'The Godfather',
            image: 'images/The God Father.jpg',
            year: '1972',
            rating: '9.2',
            categories: 'crime, drama',
            synopsis: 'The aging patriarch of an organized crime dynasty transfers control of his clandestine empire to his reluctant son.'
          }
        ];
        
        // Generate movie cards
        const movieCards = movies.map(movie => `
          <div class="col-6 col-sm-4 col-md-3 col-lg-2">
            <article class="movie-card h-100" data-category="${movie.categories}" data-year="${movie.year}" data-rating="${movie.rating}">
              <div class="movie-poster">
                <img src="${movie.image}" alt="${movie.title} movie poster" loading="lazy" class="img-fluid">
                <div class="movie-overlay">
                  <button class="play-btn" aria-label="Play ${movie.title}"><i class="fas fa-play"></i></button>
                  <button class="info-btn" aria-label="More info about ${movie.title}"><i class="fas fa-info-circle"></i></button>
                </div>
              </div>
              <div class="movie-details">
                <h3 class="movie-title">${movie.title}</h3>
                <div class="movie-meta">
                  <span class="year">${movie.year}</span>
                  <span class="rating"><i class="fas fa-star"></i> ${movie.rating}</span>
                </div>
                <p class="movie-synopsis d-none d-md-block">${movie.synopsis}</p>
                <div class="movie-actions">
                  <button class="btn btn-sm btn-outline-light w-100">Watch Now</button>
                  <button class="btn btn-sm btn-outline-secondary mt-2 w-100" aria-label="Add to watchlist">
                    <i class="fas fa-plus me-1"></i> My List
                  </button>
                </div>
              </div>
            </article>
          </div>
        `).join('');
        
        // Add movie cards to container
        container.innerHTML = movieCards;
        
        // Initialize tooltips
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.map(function (tooltipTriggerEl) {
          return new bootstrap.Tooltip(tooltipTriggerEl);
        });
        
        // Initialize movie cards functionality
        initMovieCards();
      }, 1000); // Simulate 1s loading time
    });
    
    // Function to initialize movie cards after they are loaded
    function initMovieCards() {
      const searchInput = document.getElementById('movie-search');
      const filterButtons = document.querySelectorAll('.filter-options .btn');
      const sortSelect = document.getElementById('sort-movies');
      let movieCards = [];
      
      // Store all movie cards
      movieCards = Array.from(document.querySelectorAll('.movie-card'));
      const wrapper = document.querySelector('#movies-container');
      
      // Add event listeners for movie cards
      movieCards.forEach(card => {
        card.addEventListener('click', function(e) {
          // Only handle clicks that aren't on buttons or links
          if (!e.target.closest('button, a')) {
            // Handle card click (e.g., show movie details)
            console.log('Selected movie:', this.querySelector('.movie-title').textContent);
          }
        });
      });
      
      // Search functionality
      if (searchInput) {
        searchInput.addEventListener('input', function() {
          const searchTerm = this.value.toLowerCase();
          movieCards.forEach(card => {
            const title = card.querySelector('.movie-title').textContent.toLowerCase();
            const synopsis = card.querySelector('.movie-synopsis').textContent.toLowerCase();
            if (title.includes(searchTerm) || synopsis.includes(searchTerm)) {
              card.style.display = 'block';
            } else {
              card.style.display = 'none';
            }
          });
        });
      }
      
      // Filter functionality
      filterButtons.forEach(button => {
        button.addEventListener('click', function() {
          // Update active state
          filterButtons.forEach(btn => btn.classList.remove('active'));
          this.classList.add('active');
          
          const filter = this.dataset.filter;
          movieCards.forEach(card => {
            const categories = card.dataset.category.split(',').map(cat => cat.trim());
            if (filter === 'all' || categories.includes(filter)) {
              card.style.display = 'block';
            } else {
              card.style.display = 'none';
            }
          });
        });
      });
      
      // Sort functionality
      if (sortSelect) {
        sortSelect.addEventListener('change', function() {
          const sortBy = this.value;
          const cards = Array.from(movieCards);
          
          cards.sort((a, b) => {
            switch(sortBy) {
              case 'newest':
                return parseInt(b.dataset.year) - parseInt(a.dataset.year);
              case 'rating':
                return parseFloat(b.dataset.rating) - parseFloat(a.dataset.rating);
              case 'title':
                return a.querySelector('.movie-title').textContent.localeCompare(
                  b.querySelector('.movie-title').textContent
                );
              case 'popular':
              default:
                return 0; // Default sorting (as they appear in the DOM)
            }
          });
          
          // Re-append cards in sorted order
          cards.forEach(card => wrapper.appendChild(card));
        });
      }
      
      // Add to watchlist functionality
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('btn-add') || e.target.closest('.btn-add')) {
          const button = e.target.classList.contains('btn-add') ? e.target : e.target.closest('.btn-add');
          const movieTitle = button.closest('.movie-card').querySelector('.movie-title').textContent;
          
          button.classList.toggle('added');
          const isAdded = button.classList.contains('added');
          
          if (isAdded) {
            button.innerHTML = '<i class="fas fa-check"></i>';
            button.setAttribute('aria-label', `Remove ${movieTitle} from watchlist`);
            // Here you would typically add to a watchlist array or make an API call
            console.log(`Added "${movieTitle}" to watchlist`);
          } else {
            button.innerHTML = '<i class="fas fa-plus"></i>';
            button.setAttribute('aria-label', `Add ${movieTitle} to watchlist`);
            console.log(`Removed "${movieTitle}" from watchlist`);
          }
        }
      });
      
      console.log('Movie cards initialized with search, filter, and sort functionality');
    }
  </script>
  
  <!-- Custom JavaScript -->
  <script src="js/main.js"></script>
</body>
</html>
